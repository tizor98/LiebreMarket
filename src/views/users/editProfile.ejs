<!DOCTYPE html>
<html lang="en">

<!-- Head -->
<%- include("../partials/head", {title: 'Edit Profile'}) %>

<body>
   
   <!-- Header -->
   <%- include("../partials/header") %>

   <div class="form-box">
   <form action="/users/edit?_method=PUT" method="POST" class="form-create" enctype="multipart/form-data">

      <div class="div-form">
         <label for="email">Email</label>
         <input type="email" name="email" id="email" class="control-form" value="<%= user.email %>" required>
      </div>
      
      <div class="div-form">
         <label for="name">Name</label>
         <input type="text" name="name" id="name" class="control-form" value="<%= user.name %>" required>
      </div>

      <div class="div-form">
         <label for="surname">Surname</label>
         <input type="text" name="surname" id="surname" class="control-form" value="<%= user.surname %>" required>
      </div>

      <div class="div-form">
         <label for="dni">DNI</label>
         <input type="number" name="dni" id="dni" class="control-form" minlength="6" value="<%= user.dni %>" required>
      </div>

      <div class="div-form">
         <label for="address">Address</label>
         <input type="text" name="address" id="address" class="control-form" value="<%= user.address %>">
      </div>

      <div class="div-form">
         <label for="birthday">Birthday</label>
         <input type="date" name="birthday" id="birthday" placeholder="DD-MM-AAAA" class="control-form" value="<%= user.birthday %>" required>
      </div>

      <div class="div-form">
         <label for="country_id">Country</label>
         <Select name="country_id" id="country_id" class="control-form" required>
            <% for(let i=0; i<countries.length; i++) { %>
               <option value="<%= countries[i].id %>" <%= user.Countries.id == countries[i].id ? 'selected' : null %> ><%= countries[i].name %></option>
            <% } %> 
         </Select>
      </div>
 
      <div>
         <label>Categories of interes</label>
         <br>
         <% for(let i=0; i<categories.length; i++) { %>
         <% let selectedCat = false %>
         <% for(let j=0; j<user.Categories.length; j++) { %>
         <%    if(user.Categories[j].id == categories[i].id) { 
                  selectedCat = true
                  break
            }} %>
            <input type="checkbox" name="categories" value="<%= categories[i].id %>" id="<%= categories[i].name %>" <%= selectedCat ? 'checked' : null %> >
            <label><%= categories[i].name %></label><br>
         <% } %>
      </div>

      <br>

      <div class="div-form">
         <label for="img_profile">Upload an image profile (formats png, jpeg, and jpg allowed)</label>
         <input type="file" name="img_profile" id="img_profile" class="control-form" accept="image/png, image/jpeg, image/jpg">
      </div>

      <div>
         <button type="submit" class="botton-form">Update</button>
         <button type="reset" class="botton-form">Reset</button>
      </div>
   
   </form>
   </div>

   <!-- Footer -->
   <%- include("../partials/footer")%>

</body>
</html>